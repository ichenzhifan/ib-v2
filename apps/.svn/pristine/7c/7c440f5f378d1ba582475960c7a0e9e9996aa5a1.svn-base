import React, { Component, PropTypes } from 'react';
import XButton from '../XButton';
import classNames from 'classnames';
import './index.scss';

class XFileUpload extends Component{
  constructor(props){
    super(props);
  }

  render(){
    const { className, children, multiple } = this.props;
    const uploadFile = classNames('upload-button',className);
    return(
      <XButton className={uploadFile}>
        <input type="file" ref="fileInput" onChange={ this.handleSelectFile.bind(this) } multiple={ multiple }/>
        <span>{children}</span>
      </XButton>
    );
  }

  handleSelectFile(event) {
    if(event.target.value){
      const { boundUploadedImagesActions,toggleModal } = this.props;
      toggleModal('options',true);
      const files = [...event.target.files];
      boundUploadedImagesActions.addImages(files);
    }
    event.target.value = '';
  }

}
XFileUpload.propTypes = {
  className: PropTypes.string,
  children: PropTypes.string.isRequired,
  multiple : PropTypes.string
}
export default XFileUpload;
