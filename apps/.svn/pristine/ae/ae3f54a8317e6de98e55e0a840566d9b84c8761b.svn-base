import React, { Component, PropTypes } from 'react';

class MainContainer extends Component {
  componentWillMount() {
    const {
      boundSpecActions,
      boundProjectActions,
      boundEnvActions,
      boundPriceActions,
      projectId,
      userId
    } = this.props;

    // 获取环境变量, 如各种接口的根路径
    boundEnvActions.getEnv().then(() => {
      boundSpecActions.getSpecData().then(() => {
        boundEnvActions.getUserInfo().then(() => {
          // if (projectId) {
          //   boundProjectActions.getProjectData(userId, projectId);
          // }

          // TODO need remove
          boundProjectActions.getProjectData(userId, projectId).then(() => {
            boundProjectActions.createElement(
              'UNIQUE-0',
              {
                x: 300,
                y: 400
              }
            );
            boundProjectActions.updateElement(
              'UNIQUE-0',
              'aaa',
              {
                x: 500,
                y: 500
              }
            );
            boundProjectActions.deleteElement(
              'UNIQUE-0',
              'aaa'
            );
          });
        });
      });
      //TODO modify the param
      boundPriceActions.getProductPrice("PR",['GP','5X5']);
    });
  }

  render() {
    const { children, className } = this.props;

    return (
      <div className={className}>{children}</div>
    );
  }
}

MainContainer.propTypes = {
  children: PropTypes.node.isRequired,
  boundSpecActions: PropTypes.object.isRequired,
  boundProjectActions: PropTypes.object.isRequired,
  boundEnvActions: PropTypes.object.isRequired,
  userId: PropTypes.string,
  projectId: PropTypes.string,
  className: PropTypes.string
};


export default MainContainer;
