import React, { Component, PropTypes } from 'react';

class MainContainer extends Component {
  componentWillMount() {
    const {
      boundSpecActions,
      boundProjectActions,
      boundEnvActions,
      projectId,
      userId
    } = this.props;

    // 获取环境变量, 如各种接口的根路径
    boundEnvActions.getEnv().then(() => {
      boundSpecActions.getSpecData();

      boundEnvActions.getUserInfo().then(() => {
        if (projectId) {
          boundProjectActions.getProjectData(userId, projectId);
        }
      });
    });

    // TODO need remove
    boundProjectActions.getProjectData(userId, projectId);
  }

  render() {
    const { children, className } = this.props;

    return (
      <div className={className}>{children}</div>
    );
  }
}

MainContainer.propTypes = {
  children: PropTypes.node.isRequired,
  boundSpecActions: PropTypes.object.isRequired,
  boundProjectActions: PropTypes.object.isRequired,
  boundEnvActions: PropTypes.object.isRequired,
  userId: PropTypes.string,
  projectId: PropTypes.string,
  className: PropTypes.string
};


export default MainContainer;
